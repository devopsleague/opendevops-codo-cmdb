# 入口

> 通&#x8FC7;**「CODO」全球一站式运维平台的门户导航顶部菜单栏**（[https://demo.opendevops.cn](https://demo.opendevops.cn/cmdb/)）
>
> 可进入 **配置管理平台【CMDB】**&#x8FDB;行配置管理

![20250213153615.png](images%2F20250213153615.png)

> 或者直接通过链接即可进入cmdb配置管理：<https://demo.opendevops.cn/cmdb/>

# 高频场景使用说明

## 动态分组-使用说明

> **【动态分组】**&#x662F;业务纬度下对**同类资源实例**的聚合，通过动态分组可划分**一组资源到聚合组以在不同场景中**方便使用。

### 添加动态分组

* **通用类型**

**通用类型**主要指基于资源属性或条件进行分组，如按云厂商、地域、内网IP、运行状态等。这种类型不针对特定业务，适用于广泛的基础设施资源。

![20250213154028.png](images%2F20250213154028.png)

* **业务类型**

**业务类型**按照特定业务，并通过结合业务、环境、集群和模块等多维度的选择进行资源分组，实现更加精细化的资源管理。

![20250213154332.png](images%2F20250213154332.png)

### 预览主机

回到列表可预览分组后主机资源是否符合预期

![20250213154436.png](images%2F20250213154436.png)

## 云区域-使用说明

> **【云区域】**&#x662F;在**多个云环境或多个数据中心**中进行**资源划分和管理**的逻辑区域。通过划分云区域，可将**服务、agent按厂商、vpc**进行分组，实现资源的隔离和独立管理。

### 添加云区域

点击云区域列表上方的添加云区域，即跳转至添加云区域页面，可输入如下字段进行添加。

* **基础配置**

是指用于定义云区域和主机相关信息的配置项。将云资源进行逻辑划分，从而实现更高效的资源管理与运维。通过基础配置，平台能够识别不同的云区域、代理地址以及其他关键信息，从而确保云环境的管理更加清晰和高效。通过上述基础配置，可以将云资源按照 **业务需求** 或 **环境需求** 进行合理的划分。

例如，可以基于不同的云厂商、地域、VPC 等信息来划分不同的 **主机组**，从而实现 **按需调度** 和 **高效管理**。

![20250213154550.png](images%2F20250213154550.png)

* **堡垒机配置**

基础配置元数据用于定义 **主机** 和 **堡垒机** 之间的组织权限拓扑结构。这些配置元数据在主机资产和权限同步到堡垒机的过程中，确保能够快速而准确地将数据同步到指定的组织，并自动创建所需的账号信息。

![20250213154650.png](images%2F20250213154650.png)

**输入字段说明**

**堡垒机账号模板ID:&#x20;**&#x5821;垒机账号模版里面的特权账号ID，用于推送需要创建的账号，比如账号模版里面有一个特权账号huanle，用于创建服务器user，没有这个特权账号huanle，就无法在远程服务器在创建user。

**堡垒机网域ID: &#x20;**&#x4E3B;机资产需要关联一个网域，通过网域解决无法直接连接的问题。资产关联云区域，云区域关联网域，通过这种关联关系，可以确定每个资产所在的网域。

**堡垒机账号-普通账户**: 开发角色对于的账号，也是需要在服务器上创建的用户，比如dev这种，需要在堡垒机账号模版里面创建好，同时在这里指定模版ID

**堡垒机账号-运维账户**: 运维角色对于的账号，也是需要在服务器上创建的用户，比如ops这种，需要在堡垒机账号模版里面创建好，同时在这里指定模版ID

**虚拟局域网: &#x20;**&#x901A;过vpc的方式把不同vpc下的主机划分到一个云区域。



# 概览

通过概览可快速跳转查看**基础资源**。基础资源定时同步云上数据，其中包含**集群、主机、数据库、Redis、负载均衡、VPC、虚拟子网、安全组。**

![20250213154750.png](images%2F20250213154750.png)

## 跳转

集群->业务管理-集群模板

主机->资源管理-主机列表

数据库->资源管理-云数据库

Redis->资源管理-缓存列表

负载均衡->资源管理-负载均衡

VPC->资源管理-虚拟局域网

虚拟子网->资源管理-虚拟子网

安全组->资源管理-安全组

# 全局查询

可根据ip或者名称对主机、数据库、缓存、负载均衡、云解析记录、服务数资产进行全局查询

![20250213154850.png](images%2F20250213154850.png)

# 服务树

服务树是层次化的资源组织方式，它将资源与公司的组织架构相结合，使得资源管理更加清晰，便于追踪资源的使用情况和责任分配。

通过选择不同项目组及其服务树，对于其下的主机、MySQL、Redis、LB和属性进行管理，可查看**上线状态、环境、集群、模块、资源名称、内网IP、外网IP、业务出口**等数据，可在指定模块新增资源，并对已添加资源进行上线或下线。

![20250213154950.png](images%2F20250213154950.png)

## 添加资源

在已选择的节点下，选择**资源、模块、是否启用**，并录入拓展字段，即可对资源完成添加。

![20250213155050.png](images%2F20250213155050.png)

## 业务拓扑

在已选择的服务树环境下，可查看对应环境的业务拓扑。

![20250213155150.png](images%2F20250213155150.png)

# 业务管理

可对业务、规则、动态分组、权限分组、集群模块进行管理。

## 业务管理

业务信息从权限中心同步，列表展示**中英文名称、运维负责人、研发负责人、测试负责人、生命周期和更新时间**，可对字段内容进行编辑，即对其中英文名称、运维负责人、研发负责人、测试负责人与生命周期修改。

![20250213155250.png](images%2F20250213155250.png)

## 规则管理

通过动态规则，将资源自动划分至对应拓扑中。列表展示所有已添加动态规则，可对动态规则进行**增删改、刷新**等操作。

![20250213155350.png](images%2F20250213155350.png)

### 新增动态规则

选择并输入**目标拓扑、规则条件**等内容，即可新增动态规则。在完成新增前，可通过预览规则对已编辑内容进行预览。

![20250213155450.png](images%2F20250213155450.png)

## 动态分组

动态分组功能是业务纬度下对同类资源实例的聚合。对动态分组进行增删改等管理，包含**UID、分组名称、分组类型、业务、修改人、更新时间**等信息。

![20250213155550.png](images%2F20250213155550.png)

### 新增动态分组

[动态分组使用说明](#动态分组-使用说明)⬆️

## 权限分组

jumpserver和cmdb资产数据不一致，需要打破不同系统之间的数据壁垒，实现数据统一。通过细粒度用户权限划分，在最小化权限的基础上帮助实现最灵活配置控制。此处权限分组是为了利用动态分组划分资产的方式给堡垒机资产授权，创建成功后会定时同步到业务树和业务树关联的资产到堡垒机，并在堡垒机上创建和权限分组同名的用户组和资产授权。

**特别说明： 只有在创建云区域时通过vpc关联到云区域的主机才会同步到堡垒机，否则即使是分组包含了该主机，但主机没有通过agent\_id和云区域关联，也不会同步该主机到堡垒机。**

通过cmdb平台可对权限分组进行管理，可进行增删改、同步等操作，包含**UID、分组名称、权限类型、用户组、业务、修改人、更新时间**等信息。

![20250213155650.png](images%2F20250213155650.png)

### 新增权限分组

输入**分组名称、分组类型、业务、环境、堡垒机组织、权限起止时间、用户组、账号类型**等信息，即可新增动态分组。

#### 输入字段说明

**堡垒机组织：**&#x53EF;以通过指定堡垒机组织，把资产和权限同步到对应组织。

**用户组：**&#x63;odo管理后台定义的用户组。

**账号类型：**&#x666E;通用户，对应云区域配置中的堡垒机-普通账户，特权用户，对应云区域配置中的特权账户。选择普通用户时，就会使用堡垒机-普通账户模版中中定义的用户。

![20250213155750.png](images%2F20250213155750.png)



## 集群模板

业务拓扑创建时可快速调用此处的集群模板，可在本页配置集群模板并对集群模板进行增删改、批量应用的操作。

![20250213155850.png](images%2F20250213155850.png)

### 新增集群模板

输入名称并添加模板，即可完成集群模板配置

![20250213155950.png](images%2F20250213155950.png)

# 资源管理

## 主机列表

管理所有主机，通过状态一键筛选快速筛选主机，可批量修改业务出口、一键删除主机并导出筛选的主机数据。

![20250213160150.png](images%2F20250213160150.png)

## 缓存列表

管理所有缓存信息，可选择默认搜索即关键字**模糊**搜索，或选择地址搜索即输入地址模糊查询；通过状态一键筛选快速筛选缓存信息，可批量一键删除主机并导出筛选的缓存数据。

![20250213161150.png](images%2F20250213161150.png)

## 云数据库

管理所有云数据，可通过关键字进行**模糊**搜索；通过状态一键筛选快速筛选云数据；批量一键删除数据、批量导出筛选数据。

![20250213162150.png](images%2F20250213162150.png)

## 负载均衡

管理所有负载均衡信息，可通过关键字进行**模糊**搜索；通过状态一键筛选快速筛选状态：未过期/已过期，以及负载均衡类型：ALB/SLB/NLB；可批量一键删除数据、批量导出筛选数据。

![20250213163150.png](images%2F20250213163150.png)

## 虚拟局域网

管理所有虚拟局域网，可通过关键字**精准**搜索信息、批量一键删除数据。

![20250213164150.png](images%2F20250213164150.png)

## 虚拟子网

管理所有虚拟子网，可通过关键字**精准**搜索信息；一键筛选内网/云商；批量一键删除数据。

![20250213165150.png](images%2F20250213165150.png)

## 安全组

管理所有安全组，可通过关键字**精准**搜索信息；批量一键删除数据；导出批量选中的所有数据。

![20250213170150.png](images%2F20250213170150.png)

## NAT网关

NAT网关是一种网络地址转换服务，它允许多个设备共享一个或一组公网IP地址。此处可管理所有NAT网关，可通过关键字精准搜索信息及批量删除网关。

![20250213171150.png](images%2F20250213171150.png)

## Agent列表

agent即codo-agent，允许一个主机关联多个agent。系统记录了agent的基础信息及其与主机的绑定状态。已绑定主机的agent支持换绑操作，未绑定的agent支持执行绑定。每个agent注册后，会通过定时任务与主机关联。主要方案是通过agent的proxy\_id和inner\_ip，过滤筛选云区域内符合条件的服务器并进行绑定。如果该方案未能成功，则会使用兜底方案，通过查找所有唯一内网IP且处于运行中的服务器进行绑定。

![20250213172150.png](images%2F20250213172150.png)

# 资源采购

![20250213173150.png](images%2F20250213173150.png)

## 模版管理

用于标准化和自动化资源采购流程。定义采购资源所需的信息模板，包括**私有子网、私有网络、云区域、云厂商、地域、可用区、TF配置**等，并可以加入标签和备注。确保采购信息的一致性和准确性。通过模板可以快速获取采购信息，提高采购效率，减少人为错误，并便于资源的跟踪和管理。

### 新建模板

点击列表右上侧新建模板，即可输入**模板名称、模板类型、私有子网、私有网络、云区域、云厂商、地域、可用区、TF配置**等信息，并可以加入**标签和备注**。

![20250213174150.png](images%2F20250213174150.png)

# 服务发现

## Consul Service

CMDB可将拓扑结构和相关数据同步至 Consul，为监控等系统提供服务发现所需的数据源。默认情况下，仅同步与业务相关的数据，并将这些数据嵌入到元数据中，同时将业务ID标记为Tag。利用Tags可以轻松区分不同业务，便于多区域的 Prometheus 进行数据采集和监控。

# 云事件

此处可查看在不同云上的所有云事件信息，包含**ID、账号ID、类型、实例ID、主机名、区域、服务、开始时间和状态**等信息，支持对事件进行模糊搜索、对未处理状态的事件进行一键筛选。

![20250213175150.png](images%2F20250213175150.png)



# 云解析

## 域名管理

域名管理模块主要用于存储和管理与域名相关的配置信息，可以帮助运维团队跟踪域名的注册信息（厂商、版本等）、DNS设置、与特定服务器或服务的关联情况，以及域名的到期日期等关键信息。通过集中管理域名信息，域名管理模块能够确保域名的一致性和准确性。

### 域名详情

域名详情中可查看如下内容，包含**域名ID、域名、解析数量、状态、星标、厂商、账户别名、过期时间（注）、备注、最后更新时间**等。

![20250213180150.png](images%2F20250213180150.png)



### 域名设置

无法通过API获取过期时间的域名，可通过此处设置**域名名称、域名配置信息、备注信息和过期时间**。

![20250213181150.png](images%2F20250213181150.png)

# 云区域

云区域是云主机内网的逻辑划分，用于隔离和管理不同组的主机。默认情况下，主机属于直连区域，即它们直接连接到云区域的网络。跨云区域的主机不能通过内网直接互相访问。

此页面可管理云区域，即**增删改**，也可对已配置的云区域进行**预览、克隆**等。

![20250213182150.png](images%2F20250213182150.png)

## 添加云区域

[云区域使用说明](#云区域-使用说明)⬆️

# 标签管理

标签在运维配置平台中用于分类、筛选和快速定位资源，提高运维效率。标签管理可管理所有用于资源的标签，即**增删改标签**。

![20250213183150.png](images%2F20250213183150.png)

## 创建标签

输入**标签键、标签值和备注信息**，即可完成对于标签的创建，这些标签均可用于资源。

![20250213184150.png](images%2F20250213184150.png)

# 多云配置

## 云账号管理

通过配置云账户AccessID\AccessKey信息，可以自动发现资产信息，后续可在此模块集中管理云账号。支持编辑**云账号信息、删除云账号信息、查看日志和导入资产。**

目前可支持**AWS、阿里云、腾讯云、首都云、VMware vsphere、火山云、谷歌云、华为云、Ucloud、DNSpod、PXE**即在配置中可选择如上云厂商。

### 新增配置

![20250213185150.png](images%2F20250213185150.png)

## \*公有云管理

暂无内容

## \*子账号管理

暂无内容

# 审计日志

服务树操作历史均展示在审计日志，可用于追踪变更、分析问题原因、确保合规性和安全性。

审计日志模块可查看审计日志，包括**日志ID、UUID、业务名称、模块名称、日志信息、日志时间、操作人**等，通过搜索框可对信息进行搜索。

![20250213190150.png](images%2F20250213190150.png)

